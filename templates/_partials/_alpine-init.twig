<script>
	document.addEventListener('alpine:init', () => {
		Alpine.data('countdownTimer', (targetDate) => ({
			days: 0,
			hours: 0,
			minutes: 0,
			seconds: 0,
			countdownInterval: null,
			targetTimestamp: new Date(targetDate).getTime(),
			
			startCountdown() {
				this.updateCountdown();
				this.countdownInterval = setInterval(() => {
					this.updateCountdown();
				}, 1000);
			},
			
			updateCountdown() {
				const now = new Date().getTime();
				const timeRemaining = this.targetTimestamp - now;
				
				if (timeRemaining > 0) {
					this.days = Math.floor(timeRemaining / (1000 * 60 * 60 * 24));
					this.hours = Math.floor((timeRemaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
					this.minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));
					this.seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000);
				} else {
					clearInterval(this.countdownInterval);
					this.days = 0;
					this.hours = 0;
					this.minutes = 0;
					this.seconds = 0;
				}
			},
			
			padZero(num) {
				return num.toString().padStart(2, "0");
			}
		}));
	});
</script>
